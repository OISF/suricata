language = "C"

# Header wrapping options
#header = "LICENSE here"
#trailer = ""
include_guard = "_HTP_H"
autogen_warning = "/* Warning, this file is autogenerated by cbindgen. Do NOT modify manually */"
#include_version = true
#sys_includes = [] # Sys headers
includes = []
no_includes = false
cpp_compat = true
#after_includes = ""

# Code style
#braces = "SameLine"
#line_length = 100
#tab_wideth = 2
#documentation_style = auto

# Codegen
style = "both"

after_includes = """
#define htp_status_t HtpStatus
#define htp_server_personality_t HtpServerPersonality
#define htp_protocol_t HtpProtocol
#define htp_unwanted_t HtpUnwanted
#define htp_url_encoding_handling_t HtpUrlEncodingHandling
#define htp_stream_state_t HtpStreamState
#define htp_content_encoding_t HtpContentEncoding
#define htp_log_code_t HtpLogCode
#define htp_log_level_t HtpLogLevel
#define htp_method_t HtpMethod
#define htp_data_source_t HtpDataSource
#define htp_parser_id_t HtpParserId
#define htp_transfer_coding_t HtpTransferCoding
#define htp_res_progress_t HtpResponseProgress
#define htp_req_progress_t HtpRequestProgress
"""

[export.rename]
"ConnectionFlags" = "HTP_CONNECTION_FLAGS"
"HeaderFlags" = "HTP_HEADER_FLAGS"
"HtpFlags" = "HTP_FLAGS"
"Config" = "htp_cfg_t"
"Connection" = "htp_conn_t"
"ConnectionParser" = "htp_connp_t"
"Header" = "htp_header_t"
"Headers" = "htp_headers_t"
"Param" = "htp_param_t"
"Data" = "htp_tx_data_t"
"Transaction" = "htp_tx_t"
"Transactions" = "htp_txs_t"
"Uri" = "htp_uri_t"
"Bstr" = "bstr"
"Table" = "htp_table_t"
"Log" = "htp_log_t"
"timeval" = "struct timeval"
"Logs" = "htp_logs_t"

[export]
include = ["HtpStatus",
"HtpServerPersonality",
"HtpProtocol",
"HtpUnwanted",
"HtpUrlEncodingHandling",
"HtpStreamState",
"HtpContentEncoding",
"HtpLogCode",
"HtpLogLevel",
"HtpMethod",
"HtpDataSource",
"HtpParserId",
"HtpTransferCoding",
"HtpResponseProgress",
"HtpRequestProgress",
"HtpFlags",
"HeaderFlags",
"ConnectionFlags"]

[enum]
rename_variants = "QualifiedScreamingSnakeCase"
prefix_with_name = false

[macro_expansion]
bitflags = true

# Rust parsing options
[parse]
parse_deps = false
clean = false

[parse.expand]
features = ["cbindgen"]
